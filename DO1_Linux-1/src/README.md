## №1. Установка ОС

<div>
<ol>
<li>

Узнайте версию Ubuntu, выполнив команду

> cat /etc/issue

![Alt text](image.png)
</li>
</ol>
</div>

## №2. Создание пользователя

<div>
<ol>
<li>

Создания нового пользователя:

> sudo adduser school21

Вам будет предложено ввести пароль для нового пользователя и дополнительные сведения о пользователе, такие как имя и номер телефона (эти поля можно оставить пустыми, нажав "Enter" по умолчанию).</li>
<li>

Добавление в группу "adm":
Запустите следующую команду, чтобы добавить нового пользователя в группу "adm":

> sudo usermod -aG adm school21

Здесь:  
`usermod` - команда для модификации данных пользователя.  
`-aG adm` - ключи, означающие добавление пользователя (-a) в группу (-G) с именем "adm".  
`newuser` - имя созданного вами нового пользователя.</li>
<li>

Вставьте скриншот вызова команды для создания пользователя.

![Alt text](image-1.png)</li>
<li>

Новый пользователь должен быть в выводе команды

> cat /etc/passwd

![Alt text](image-2.png)</li>
</ol>
</div>

## №3. Настройка сети ОС

<div>
<ol>
<li>

Задайте название машины вида user-1  
Чтобы изменить название машины выполните следующие команды:  
> sudo vim /etc/hostname  
> reboot  

![Alt text](image-3.png)</li>
<li>

Проверьте текущую временную зону  

> timedatectl

![Alt text](image-4.png)

Список доступных временных зон  

> timedatectl list-timezones

![Alt text](image-5.png)

Установите временную зону, соответствующую вашему текущему местоположению  

> sudo timedatectl set-timezone Zone/Subzone

![Alt text](image-6.png)</li>
<li>

Выведите названия сетевых интерфейсов с помощью консольной команды  

> ip link show

![Alt text](image-7.png)

lo или local loopback (локальная петля). Служит для подключения по сети к этому же компьютеру и не требует дополнительной настройки</li>
<li>

Получитe ip адрес устройства, на котором вы работаете, от DHCP сервера.

> ip a

![Alt text](image-8.png)

Dynamic Host Configuration Protocol (DHCP) — автоматический предоставляет IP адреса и прочие настройки сети (маску сети, шлюз и т.п) компьютерам и различным устройствам в сети.</li>
<li>

Определите и выведите на экран внешний ip-адрес шлюза (ip) и внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw).  

> curl ifconfig.me  
> ip route | grep dafault

![Alt text](image-9.png)</li>

46.138.176.90 - внешний адрес  
10.0.2.2 - внутренний адрес

<li>
Задать статичные (заданные вручную, а не полученные от DHCP сервера)

> sudo nano /etc/netplan/00-installer-config.yaml

Внутри редактора измените содержимое файла на следующее (замените enp0s3 на имя вашего сетевого интерфейса, addresses на желаемый статичный IP-адрес, gateway4 на IP-адрес вашего шлюза, и 8.8.8.8 на IP-адрес DNS-сервера):

Редактируем  

![Alt text](image-10.png)

Проверяем изменения  

![Alt text](image-11.png)

Пингуем удалённые хосты  

![Alt text](image-12.png)

</li>
</ol>
</div>

## №4. Обновление ОС

<div>
<ol>
<li>

Обновите системные пакеты до последней на момент выполнения задания версии  

> sudo apt update  
> sudo apt upgrade


![Alt text](image-13.png)
</li>
</ol>
</div>

## №5. Использование команды sudo

<div>
<ol>
<li>

Разрешите пользователю, созданному в Part 2, выполнять команду sudo.  
Sudo — это утилита, предоставляющая привилегии root для выполнения административных операций в соответствии со своими настройками. Она позволяет легко контролировать доступ к важным приложениям в системе. По умолчанию, при установке Ubuntu первому пользователю (тому, который создаётся во время установки) предоставляются полные права на использование sudo. Т.е. фактически первый пользователь обладает той же свободой действий, что и root.</li>

> sudo usermod -aG sudo school21  
> su - school21  

![Alt text](image-14.png)

> hostname school21  

![Alt text](image-15.png)</li>
</ol>
</div>

## №6. Установка и настройка службы времени

<div>
<ol>
<li>

Настройте службу автоматической синхронизации времени.  
Вывод следующей команды должен содержать NTPSynchronized=yes:
timedatectl show

> sudo apt install -y ntp  
> sudo systemctl enable ntp  
> sudo systemctl start ntp  
> timedatectl show  

![Alt text](image-16.png)

</li>
</ol>
</div>

## №7. Установка и использование текстовых редакторов

<div>
<ol>
<li>

Установите текстовые редакторы VIM (+ любые два по желанию NANO, MCEDIT, JOE и т.д.)  
> sudo apt install vim  
> sudo apt install nano  
> sudo apt install mcedit
</li>
<li>

Используя каждый из трех выбранных редакторов, создайте файл test_X.txt, где X -- название редактора, в котором создан файл. Напишите в нём свой никнейм, закройте файл с сохранением изменений.</li>
<li>

Используя каждый из трех выбранных редакторов, откройте файл на редактирование, отредактируйте файл, заменив никнейм на строку "21 School 21", закройте файл без сохранения изменений.</li>
<li>

Используя каждый из трех выбранных редакторов, отредактируйте файл ещё раз (по аналогии с предыдущим пунктом), а затем освойте функции поиска по содержимому файла (слово) и замены слова на любое другое.</li>

<ul>

#### VIM

> vim test_VIM.txt  

![Alt text](image-17.png)

![Alt text](image-18.png)

![Alt text](image-19.png)

- vim test_VIM.txt
- Режим редактирования: I
- Выйти из режима редактирования: esc
- Выход с охранением: :wq
- Выход без сохранения: :q
- Поиск: /<текст, который хотим найти>
- Замена: :s/<что хотим изменить>/<на что хотим заменить>
Например: %s/School/University/g

#### MCEDIT

> mcedit test_MCEDIT.txt  

![Alt text](image-20.png)

![Alt text](image-22.png)

![Alt text](image-23.png)

- mcedit test_mcedit.txt
- Выход с охранением: F2 (yes) + F10
- Выход без сохранения: F10(no)
- Поиск: F7 + <текст который ищем> + <ок>
- Замена: F4 + <что хотим изменить> + <на что хотим заменить> + replace

#### NANO

> nano test_NANO.txt  

![Alt text](image-24.png)

![Alt text](image-25.png)

![Alt text](image-26.png)

- nano test_NANO.txt
- Выход с сохранением: CTRL + x, затем y и enter
- Выход без сохранения: CTRL + x, затем n
- Поиск: CTRL + W, затем enter (alt + w для перехода к след. вхождению, ctrl + c для преращения поиска)
- Замена: CTRL + \\+ <что хотим изменить + enter> + <на что хотим заменить + enter> + A(для замены все вхождения) или y и n по отдельности
</ul>
</ol>
</div>


## №8. Установка и базовая настройка сервиса SSHD

<div>
<ol>
<li>

Установить службу SSHd.

- sudo apt-get install ssh
- sudo apt install openssh-server  
![Alt text](image-27.png)</li>

<li>

Добавить автостарт службы при загрузке системы.

- sudo systemctl enable ssh
- systemctl status ssh  
![Alt text](image-28.png)

<li>

Перенастроить службу SSHd на порт 2022.

- sudo vim /etc/ssh/sshd_config
- systemctl restart sshd  
![Alt text](image-29.png)

</li>
<li>
Используя команду ps, показать наличие процесса sshd. Для этого к команде нужно подобрать ключи.

- `ps` (показывает запущенные процессы, выполняемые пользователем в окне терминала);
- `ps -e` или `ps -A` (Чтобы просмотреть все запущенные процессы);
- `ps -d` (Чтобы показать все процессы, кроме лидеров сессии);
- `ps -d -N` (можно инвертировать вывод с помощью переключателя -N. Например, если хочу вывести только лидеров сеансов)
- `ps T` (увидеть только процессы, связанные с этим терминалом);
- `ps r` (просмотреть все работающие (running) процессы);
- `ps -p` 'pid' (если вы знаете идентификатор процесса PID, вы можете просто использовать следующую команду, для вывода процесса с этим 'pid');
-`ps -p` 'pid1' 'pid2'
- ps U 'userlist' (найти все процессы, выполняемые конкретным пользователем);
- `ps -ef` (получить полный список);

![Alt text](image-30.png)</li>

<li>

Перезагрузить систему</li>

### NETSTAT

> sudo apt install net-tools  
> netstat -tan  

![Alt text](image-31.png)

- -t (--tcp) отображает соедниеня только по tcp
- -a (--all) вывод всех активных подключений TCP
- -n (--numeric) вывод активных подключений TCP с отображением адресов и номеров портов в числовом формате
- Proto: Название протокола (протокол TCP или протокол UDP);
- recv-Q: очередь получения сети
- send-Q: Сетевая очередь отправки
- Local Address адрес локального компьтера и используемы номер порта
- Foreign Address адрес и номер удаленного компьтера к которомц подключен сокет
- State состояние сокетв
- 0.0.0.0 означает IP-адрес на локальной машине

</ol>
</div>

## №9. Установка и использование утилит top, htop

### Установить и запустить утилиты top и htop

<div>
<ol>
<li>

По выводу команды top определить и написать в отчёте:

- uptime - 8min;
- количество авторизованных пользователей - 1;
- общую загрузку системы - 0.7, 0.78, 0.52
- общее количество процессов - 104;
- загрузку cpu - 0.0 us, 0.0 sy, 0.0 ni, 100.0 id, 0.0 wa, 0.0 hi, 0.0 si, 0.0 st;
- загрузку памяти - 139,4/448,3;

![Alt text](image-32.png)
- pid процесса занимающего больше всего памяти - 811 (top -o %MEM);

![Alt text](image-33.png)

- pid процесса, занимающего больше всего процессорного времени - 1576 (top -o %CPU);

![Alt text](image-35.png)

</li>
<li>В отчёт вставить скрин с выводом команды htop:

  - отсортированному по PID, PERCENT_CPU, PERCENT_MEM, TIME
    
    ![Alt text](image-36.png)

    ![Alt text](image-37.png)

    ![Alt text](image-38.png)

    ![Alt text](image-39.png)
  - отфильтрованному для процесса sshd
    
    ![Alt text](image-40.png)
  - с процессом syslog, найденным, используя поиск
    
    ![Alt text](image-41.png)
  - с добавленным выводом hostname, clock и uptime
    
    ![Alt text](image-42.png)

</li>
</ol>
</div>

## №10. Использование утилиты fdisk

<div>
<ol>
<li>

  > sudo fdisk -l  
  > sudo swapon --show

![Alt text](image-21.png)

![Alt text](image-34.png)

  - название жесткого диска - vbox harddisk;
  - размер - 20 GiB;
  - количество секторов - 41943040;
  - размер swap - 1.9 GiB.

</li>
</ol>
</div>


## №11. Использование утилиты df

<div>
<ol>
<li>Запустить команду df.
   В отчёте написать для корневого раздела (/):

  - размер раздела - 10218772;
  - размер занятого пространства - 4747820;
  - размер свободного пространства - 4930280;
  - процент использования - 50%;  

  Определить и написать в отчёт единицу измерения в выводе - килобайт

  ![Alt text](image-43.png)

</li>
<li>Запустить команду df -Th.  
   В отчёте написать для корневого раздела (/):

  - размер раздела - 9.8G;
  - размер занятого пространства - 4.6G;
  - размер свободного пространства - 4.8G;
  - процент использования - 50%  

  Определить и написать в отчёт тип файловой системы для раздела - ext4.

  ![Alt text](image-44.png)

</li>
</ol>
</div>



## №12. Использование утилиты du

<div>
<ol>
<li> 

Запустить команду du.

![Alt text](image-45.png)
</li>
<li> 

Вывести размер папок /home, /var, /var/log (в байтах)

> sudo du -sh /home /var/log /var

![Alt text](image-47.png)

Вывести размер папок /home, /var, /var/log (в человекочитаемом виде)

> sudo du -s /home /var/log /var

![Alt text](image-46.png)

</li>
<li>

Вывести размер всего содержимого в /var/log (не общее, а каждого вложенного элемента, используя \-)

> sudo du -sh /var/log/*

![Alt text](image-48.png)

</li>
</ol>
</div>

## №13. Установка и использование утилиты ncdu

<div>
<ol>
<li>
Установить утилиту ncdu. Вывести размер папок /home, /var, /var/log.

   > sudo apt-get install ncdu  
   > ncdu /home  
   > ncdu /var  
   > ncdu /var/log  

   ![Alt text](image-49.png)

   ![Alt text](image-50.png)

   ![Alt text](image-51.png)
</li>
</ol>
</div>

## №14. Работа с системными журналами

sudo vim /var/log/dmesg  
sudo vim /var/log/syslog  
sudo vim /var/log/auth.log

<div>
<ol>
<li>Написать в отчёте время последней успешной авторизации, имя пользователя и метод входа в систему (21:21:50; lobsterv by LOGIN)

![Alt text](image-52.png)

</li>
<li> Перезапустить службу SSHd.

  > sudo systemctl restart ssh
</li>
<li>

Вставить в отчёт скрин с сообщением о рестарте службы (искать в логах).

![Alt text](image-54.png)

![Alt text](image-53.png)

</li>
</ol>
</div>

## №15. Использование планировщика заданий CRON

<div>
<ol>
<li> 

Используя планировщик заданий, запустите команду uptime через каждые 2 минуты.

> crontab -e

![Alt text](image-55.png)</li>
<li>

Найти в системных журналах строчки (минимум две в заданном временном диапазоне) о выполнении.
  > grep "uptime" /var/log/syslog

![Alt text](image-57.png)

</li>

<li> 

Удалите все задания из планировщика заданий.

![Alt text](image-56.png)

</li>
</ol>
</div>
